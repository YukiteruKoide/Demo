# Yukiteru Mart データ分析プロジェクト

## 概要
Yukiteru Martの売上データを分析するためのDatabricksプロジェクトです。データベース制約の設定、分析マートの作成、データパイプラインの構築を行います。

## プロジェクト構成

### 📁 ファイル構成
```
01_yukiteru_mart/
├── 01_事前作業.ipynb              # データベース制約設定（主キー・外部キー）
├── 02_マート作成.ipynb            # 分析用マートテーブル作成
├── パイプライン/
│   ├── BeforeAfter.ipynb          # データ取り込み前後の件数確認
│   └── Volume をトリガーにした Auto Loader.ipynb  # 新規データ自動取り込み
└── Data/                          # CSVデータファイル
```

### 🚀 実行順序
1. **01_事前作業.ipynb** - データベース制約の設定
2. **02_マート作成.ipynb** - 分析マートの作成
3. **パイプライン/** - 継続的なデータ更新

## 📊 作成されるマートテーブル

### 1. 顧客サマリーマート（customer_summary_table）
- **目的**: 顧客別購買パターン分析
- **集計内容**: 総購入金額、平均単価、購入回数
- **活用場面**: 顧客セグメンテーション、VIP顧客特定

### 2. 店舗売上サマリーマート（store_sales_summary_table）
- **目的**: 店舗パフォーマンス分析
- **集計内容**: 月次売上、取引件数（店舗別）
- **活用場面**: 店舗比較、売上トレンド分析

## 🔧 技術仕様

### データベース制約
- **主キー**: 各テーブルの一意性保証
- **外部キー**: 参照整合性の維持
- **対象テーブル**: customers, products, stores, transactions, inventory

### Auto Loader設定
- **入力パス**: `/Volumes/users/yukiteru_koide/volume_yukiteru_mart_transaction`
- **出力テーブル**: `users.yukiteru_koide.transactions_table`
- **トリガー**: 手動実行（once=True）

## 📈 ビジネス価値

### 分析可能な項目
- 🎯 **顧客分析**: 購買行動、ロイヤルティ分析
- 🏪 **店舗分析**: パフォーマンス比較、立地効果
- 📅 **時系列分析**: 売上トレンド、季節性
- 💰 **収益分析**: 利益率、商品別貢献度

### 活用シーン
- **経営ダッシュボード**: リアルタイム売上監視
- **マーケティング**: ターゲット顧客の特定
- **店舗運営**: 効率的な在庫管理
- **戦略立案**: データドリブンな意思決定

## 🔄 データパイプライン

### 新規データ取り込みフロー
1. **Volume配置**: 新しいCSVファイルをVolumeにアップロード
2. **Auto Loader実行**: 自動的にDeltaテーブルに取り込み
3. **件数確認**: BeforeAfterノートブックで検証
4. **マート更新**: 分析マートテーブルの再作成

### 監視ポイント
- ✅ データ品質（NULL値、異常値）
- ✅ 処理件数の整合性
- ✅ 実行時間のパフォーマンス
- ✅ エラーログの確認

---

## 🎓 学習ポイント

このプロジェクトで学べる技術：
- **Databricks基礎**: ノートブック、クラスター管理
- **Deltaテーブル**: ACID準拠、タイムトラベル
- **Auto Loader**: ストリーミングデータ取り込み
- **SQL最適化**: 結合、集計、インデックス活用
- **データ品質管理**: 制約設定、検証プロセス 